<div class="profile-header">
    <div class="profile-avatar">
        <img [src]="user?.profilePictureUrl" alt="Your profile" />
    </div>

    <div class="profile-info">
        <div class="profile-username-section">
            <h2 class="profile-username">{{ user?.username }}</h2>
            <a *ngIf="isSameUser" routerLink="/edit" mat-raised-button>
                Edit Profile
            </a>
            <button
                *ngIf="!isSameUser && !isFollowing && isUserFollowing"
                (click)="follow('follow')"
                mat-raised-button
                color="primary"
            >
                Follow Back
            </button>
            <button
                *ngIf="!isSameUser && !isFollowing && !isUserFollowing"
                (click)="follow('follow')"
                mat-raised-button
                color="primary"
            >
                Follow
            </button>
            <button
                *ngIf="!isSameUser && isFollowing"
                (click)="follow('unfollow')"
                mat-raised-button
            >
                Unfollow
            </button>
        </div>

        <div class="profile-stats">
            <div class="stat-item">
                <strong>{{ postsCount }}</strong> posts
            </div>
            <div class="stat-item">
                <strong> {{ user?.followers?.length }} </strong> followers
            </div>
            <div class="stat-item">
                <strong> {{ user?.following?.length }} </strong> following
            </div>
        </div>

        <div class="profile-bio">
            <div class="profile-name">
                {{ user?.name?.first }} {{ user?.name?.last }}
            </div>
            <div class="bio-text" *ngIf="user?.bio">
                {{ user?.bio }}
            </div>
        </div>
    </div>
</div>
